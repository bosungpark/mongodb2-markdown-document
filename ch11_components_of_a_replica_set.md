Components of a Replica Set
=

Syncing
-
Replication은 결국 데이터를 여러 서버에 분산하는 것이다.
몽고는 oplog를 쌓는 방식으로 이 목표를 달성하였다. 이 로그는 프라이머리 노드에 있는 capped collection에 저장된다.
그리고 세컨더리 노드들은 프라이머리로부터 받은 연산의 자신만의 로그를 쌓는다.
이는 세컨더리 노드 역시 데이터 싱크의 소스를 사용될 수 있다는 의미이다.
이렇게 로그를 쌓은 후, 자신에게 쌓인 로그 이후에 쌓인 것이 프라이머리에 있다면 싱크를 맞춘다.

Initial Sync
-
모든 데이터를 노드에서 복사해 다른 노드로 붙여 넣는 것을 의미한다.
단, 당연하게도 데이터를 메모리에 올려야하니, 서버에 부담을 줄 수 있다.

Replication
-
몽고에서 싱크를 맞추는 또 하나의 방식이다.
initial sync 이후 세컨더리 노드는 주기적으로 싱크를 맞춘다.

Handling Staleness
-
만약 세컨더리의 oplog가 너무 뒤쳐저있다면 데이터를 반환하지 못할 수도 있다.
이 경우, 주변 노드들에서 부트스트랩을 할 수 없는지 찾아본다.

이런 문제를 예방하기 위해서는 oplog의 용량을 키우는 방법이 있다.

Heartbeats
-
서로 다른 노드의 상태를 체크하기 위한 수단.







